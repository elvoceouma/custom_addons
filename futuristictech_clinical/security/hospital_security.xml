<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Define security groups -->
    <record id="group_hospital_user" model="res.groups">
        <field name="name">Hospital / User</field>
        <field name="category_id" ref="base.module_category_services"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="group_hospital_manager" model="res.groups">
        <field name="name">Hospital / Manager</field>
        <field name="category_id" ref="base.module_category_services"/>
        <field name="implied_ids" eval="[(4, ref('group_hospital_user'))]"/>
        <field name="users" eval="[(4, ref('base.user_root')), (4, ref('base.user_admin'))]"/>
    </record>

    <record id="group_hospital_doctor" model="res.groups">
        <field name="name">Hospital / Doctor</field>
        <field name="category_id" ref="base.module_category_services"/>
        <field name="implied_ids" eval="[(4, ref('group_hospital_user'))]"/>
    </record>

    <record id="group_hospital_nurse" model="res.groups">
        <field name="name">Hospital / Nurse</field>
        <field name="category_id" ref="base.module_category_services"/>
        <field name="implied_ids" eval="[(4, ref('group_hospital_user'))]"/>
    </record>

    <record id="group_hospital_pharmacist" model="res.groups">
        <field name="name">Hospital / Pharmacist</field>
        <field name="category_id" ref="base.module_category_services"/>
        <field name="implied_ids" eval="[(4, ref('group_hospital_user'))]"/>
    </record>

    <record id="group_hospital_receptionist" model="res.groups">
        <field name="name">Hospital / Receptionist</field>
        <field name="category_id" ref="base.module_category_services"/>
        <field name="implied_ids" eval="[(4, ref('group_hospital_user'))]"/>
    </record>

    <!-- Record Rules -->
    
    <!-- Patient record rules -->
    <record id="rule_hospital_patient_user" model="ir.rule">
        <field name="name">Hospital Patient: User can only read</field>
        <field name="model_id" ref="model_hospital_patient"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    
    <!-- Nurses assessment record rules -->
    <record id="rule_hospital_nurse_assessment_user" model="ir.rule">
        <field name="name">Hospital Nurse Assessment: User can only read</field>
        <field name="model_id" ref="model_hospital_nurse_assessment"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_nurse_assessment_nurse" model="ir.rule">
        <field name="name">Hospital Nurse Assessment: Nurse can create and manage</field>
        <field name="model_id" ref="model_hospital_nurse_assessment"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_nurse'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_nurse_assessment_doctor" model="ir.rule">
        <field name="name">Hospital Nurse Assessment: Doctor can read</field>
        <field name="model_id" ref="model_hospital_nurse_assessment"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_doctor'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_nurse_assessment_manager" model="ir.rule">
        <field name="name">Hospital Nurse Assessment: Manager has full access</field>
        <field name="model_id" ref="model_hospital_nurse_assessment"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    
    <!-- Drug chart record rules -->
    <record id="rule_hospital_drug_chart_user" model="ir.rule">
        <field name="name">Hospital Drug Chart: User can only read</field>
        <field name="model_id" ref="model_hospital_drug_chart"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_drug_chart_nurse" model="ir.rule">
        <field name="name">Hospital Drug Chart: Nurse can create and update</field>
        <field name="model_id" ref="model_hospital_drug_chart"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_nurse'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_drug_chart_doctor" model="ir.rule">
        <field name="name">Hospital Drug Chart: Doctor can read and update</field>
        <field name="model_id" ref="model_hospital_drug_chart"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_doctor'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_drug_chart_manager" model="ir.rule">
        <field name="name">Hospital Drug Chart: Manager has full access</field>
        <field name="model_id" ref="model_hospital_drug_chart"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    
    <!-- Investigation request record rules -->
    <record id="rule_hospital_investigation_request_user" model="ir.rule">
        <field name="name">Hospital Investigation Request: User can only read</field>
        <field name="model_id" ref="model_hospital_investigation_request"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_investigation_request_doctor" model="ir.rule">
        <field name="name">Hospital Investigation Request: Doctor can create and manage</field>
        <field name="model_id" ref="model_hospital_investigation_request"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_doctor'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_investigation_request_manager" model="ir.rule">
        <field name="name">Hospital Investigation Request: Manager has full access</field>
        <field name="model_id" ref="model_hospital_investigation_request"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    
    <!-- Room record rules -->
    <record id="rule_hospital_room_user" model="ir.rule">
        <field name="name">Hospital Room: User can only read</field>
        <field name="model_id" ref="model_hospital_room"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_room_receptionist" model="ir.rule">
        <field name="name">Hospital Room: Receptionist can manage</field>
        <field name="model_id" ref="model_hospital_room"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_receptionist'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_room_manager" model="ir.rule">
        <field name="name">Hospital Room: Manager has full access</field>
        <field name="model_id" ref="model_hospital_room"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    
    <record id="rule_hospital_patient_receptionist" model="ir.rule">
        <field name="name">Hospital Patient: Receptionist can read and create</field>
        <field name="model_id" ref="model_hospital_patient"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_receptionist'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_patient_doctor" model="ir.rule">
        <field name="name">Hospital Patient: Doctor can read, create and write</field>
        <field name="model_id" ref="model_hospital_patient"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_doctor'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_patient_manager" model="ir.rule">
        <field name="name">Hospital Patient: Manager has full access</field>
        <field name="model_id" ref="model_hospital_patient"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    
    <!-- Appointment record rules -->
    <record id="rule_hospital_appointment_user" model="ir.rule">
        <field name="name">Hospital Appointment: User can only read</field>
        <field name="model_id" ref="model_hospital_appointment"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_appointment_receptionist" model="ir.rule">
        <field name="name">Hospital Appointment: Receptionist can manage</field>
        <field name="model_id" ref="model_hospital_appointment"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_receptionist'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_appointment_doctor" model="ir.rule">
        <field name="name">Hospital Appointment: Doctor can read their appointments</field>
        <field name="model_id" ref="model_hospital_appointment"/>
        <field name="domain_force">[('physician_id.user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_doctor'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_appointment_manager" model="ir.rule">
        <field name="name">Hospital Appointment: Manager has full access</field>
        <field name="model_id" ref="model_hospital_appointment"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    
    <!-- Prescription record rules -->
    <record id="rule_hospital_prescription_user" model="ir.rule">
        <field name="name">Hospital Prescription: User can only read</field>
        <field name="model_id" ref="model_hospital_prescription"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_prescription_doctor" model="ir.rule">
        <field name="name">Hospital Prescription: Doctor can create and manage their prescriptions</field>
        <field name="model_id" ref="model_hospital_prescription"/>
        <field name="domain_force">[('physician_id.user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_doctor'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_prescription_pharmacist" model="ir.rule">
        <field name="name">Hospital Prescription: Pharmacist can read and update</field>
        <field name="model_id" ref="model_hospital_prescription"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_pharmacist'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_prescription_manager" model="ir.rule">
        <field name="name">Hospital Prescription: Manager has full access</field>
        <field name="model_id" ref="model_hospital_prescription"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    
    <!-- Admission record rules -->
    <record id="rule_hospital_admission_user" model="ir.rule">
        <field name="name">Hospital Admission: User can only read</field>
        <field name="model_id" ref="model_hospital_admission"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_admission_receptionist" model="ir.rule">
        <field name="name">Hospital Admission: Receptionist can create and manage</field>
        <field name="model_id" ref="model_hospital_admission"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_receptionist'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_admission_doctor" model="ir.rule">
        <field name="name">Hospital Admission: Doctor can read and update</field>
        <field name="model_id" ref="model_hospital_admission"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_doctor'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_admission_manager" model="ir.rule">
        <field name="name">Hospital Admission: Manager has full access</field>
        <field name="model_id" ref="model_hospital_admission"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    
    <!-- Medicine record rules -->
    <record id="rule_hospital_medicine_user" model="ir.rule">
        <field name="name">Hospital Medicine: User can only read</field>
        <field name="model_id" ref="model_hospital_medicine"/>
        <field name="domain_force">[(1, '=', 1)]</field> <!-- Fixed this line -->
        <field name="groups" eval="[(4, ref('group_hospital_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_medicine_pharmacist" model="ir.rule">
        <field name="name">Hospital Medicine: Pharmacist can manage</field>
        <field name="model_id" ref="model_hospital_medicine"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_pharmacist'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    
    <record id="rule_hospital_medicine_manager" model="ir.rule">
        <field name="name">Hospital Medicine: Manager has full access</field>
        <field name="model_id" ref="model_hospital_medicine"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_hospital_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>  

     Security Access Rules
        <record id="access_medication_consent_form_user" model="ir.model.access">
            <field name="name">medication.consent.form.user</field>
            <field name="model_id" ref="model_medication_consent_form"/>
            <field name="group_id" ref="base.group_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_unlink" eval="1"/>
        </record>
        
        <record id="access_medication_consent_form_line_user" model="ir.model.access">
            <field name="name">medication.consent.form.line.user</field>
            <field name="model_id" ref="model_medication_consent_form_line"/>
            <field name="group_id" ref="base.group_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_unlink" eval="1"/>
        </record>
        
        <record id="access_hospital_medicine_user" model="ir.model.access">
            <field name="name">hospital.medicine.user</field>
            <field name="model_id" ref="model_hospital_medicine"/>
            <field name="group_id" ref="base.group_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_unlink" eval="1"/>
        </record>
        
        <record id="access_hospital_medicine_type_user" model="ir.model.access">
            <field name="name">hospital.medicine.type.user</field>
            <field name="model_id" ref="model_hospital_medicine_type"/>
            <field name="group_id" ref="base.group_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_unlink" eval="1"/>
        </record>
        
        <record id="access_hospital_medicine_category_user" model="ir.model.access">
            <field name="name">hospital.medicine.category.user</field>
            <field name="model_id" ref="model_hospital_medicine_category"/>
            <field name="group_id" ref="base.group_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_unlink" eval="1"/>
        </record>
        
        <record id="access_hospital_medicine_form_user" model="ir.model.access">
            <field name="name">hospital.medicine.form.user</field>
            <field name="model_id" ref="model_hospital_medicine_form"/>
            <field name="group_id" ref="base.group_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_unlink" eval="1"/>
        </record>
        
        <record id="access_hospital_medicine_dosage_user" model="ir.model.access">
            <field name="name">hospital.medicine.dosage.user</field>
            <field name="model_id" ref="model_hospital_medicine_dosage"/>
            <field name="group_id" ref="base.group_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_unlink" eval="1"/>
        </record>
        
        <record id="access_hospital_medicine_unit_user" model="ir.model.access">
            <field name="name">hospital.medicine.unit.user</field>
            <field name="model_id" ref="model_hospital_medicine_unit"/>
            <field name="group_id" ref="base.group_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_unlink" eval="1"/>
        </record>     
</odoo>