<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Case History Form View -->    <!-- Case History Form View -->
    <record id="view_hospital_case_history_form" model="ir.ui.view">
        <field name="name">hospital.case.history.form</field>
        <field name="model">hospital.case.history</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_save" string="Save" type="object" class="oe_highlight"/>
                    <button name="action_discard" string="Discard" type="object"/>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="patient_id" options="{'no_create': True}" widget="selection"/>
                            <field name="age"/>
                            <field name="marital_status"/>
                            <field name="languages_known" widget="many2many_tags"/>
                            <field name="education"/>
                        </group>
                        <group>
                            <field name="dob"/>
                            <field name="sex"/>
                            <field name="religion"/>
                            <field name="other_religion" invisible="religion != 'other'"/>
                            <field name="socio_economic_status"/>
                            <field name="occupation"/>
                            <field name="vocation" invisible="occupation != 'specify_any'"/>
                        </group>
                    </group>

                    <group col="4" colspan="2" string="Informants">
                        <field name="informant_name"/>
                        <field name="relationship_id" widget="selection"/>
                        <field name="duration_stay"/>
                    </group>

                    <group string="INFORMATION : Reliable and Adequate">
                        <field name="information" nolabel="1" placeholder="Enter reliable and adequate information about the patient's case..."/>
                    </group>

                    <group string="CHIEF COMPLAINTS : - (Chronological order with duration)">
                        <field name="complaint_ids" nolabel="1">
                            <tree editable="bottom">
                                <field name="chrono_no"/>
                                <field name="chief_compaints"/>
                                <field name="duration"/>
                                <field name="year"/>
                            </tree>
                        </field>
                    </group>

                    <group string="Onset of Illness: (Check appropriate box and describe about the onset)">
                        <field name="onset_of_ill" widget="radio"/>
                        <field name="abrupt_desc" invisible="onset_of_ill != 'Abrupt'"/>
                        <field name="acute_desc" invisible="onset_of_ill != 'Acute'"/>
                        <field name="subacute_desc" invisible="onset_of_ill != 'Sub-acute'"/>
                        <field name="insidious_desc" invisible="onset_of_ill != 'Insidious'"/>
                    </group>

                    <group>
                        <field name="course" placeholder="Describe the course of the illness..."/>
                    </group>

                    <group col="4" colspan="2" string="Duration of Illness (Specify Month or Years)">
                        <field name="duration_illness" widget="radio"/>
                        <field name="ill_months" invisible="duration_illness != 'Months'"/>
                        <field name="ill_years" invisible="duration_illness != 'Years'"/>
                    </group>

                    <group>
                        <field name="precipitating_factors"/>
                    </group>

                    <group string="HISTORY OF PRESENT ILLNESS (Describe Chief Complaints)">
                        <field name="history_present_ill" nolabel="1"/>
                    </group>

                    <group string="Biological Functioning">
                        <group string="Appetite">
                            <field name="appetite" nolabel="1" widget="radio"/>
                        </group>
                        <group string="Sleep">
                            <field name="sleep" nolabel="1" widget="radio"/>
                        </group>
                        <group string="Bladder">
                            <field name="bladder" nolabel="1" widget="radio"/>
                        </group>
                        <group string="Bowel">
                            <field name="bowel" nolabel="1" widget="radio"/>
                        </group>
                        <group string="Weight">
                            <field name="weight" nolabel="1" widget="radio"/>
                        </group>
                        <group string="Sexual">
                            <field name="sexual" nolabel="1" widget="radio"/>
                            <field name="other_sex_issues" nolabel="1" invisible="sexual != 'Other issues'"/>
                        </group>
                    </group>

                    <group string="Social Functioning" col="1" colspan="1">
                        <field name="dress_take_care_himself" widget="radio"/>
                        <field name="goes_work" widget="radio"/>
                        <field name="does_husehold" widget="radio"/>
                        <field name="gets_along_wit_family" widget="radio"/>
                        <field name="gets_along_wit_neighbours" widget="radio"/>
                    </group>

                    <group string="Treatment History">
                        <group col="1" colspan="1" string="1.Psychiatric Treatment History (Specify with the year, duration and Response)">
                            <field name="previous_hospitalization"/>
                            <field name="opd"/>
                            <field name="day_care_centre"/>
                        </group>
                    </group>

                    <group string="Interval functioning (what is the patient like between episodes/when 'well'):">
                        <field name="interval_functioning" nolabel="1"/>
                    </group>

                    <group string="Suicide attempts (If present, refer Suicidal Risk Assessment - Becks Suicide Intent Scale)/drug and alcohol abuse">
                        <field name="suicide_attempts" nolabel="1"/>
                    </group>

                    <group col="1" colspan="1" string="2. Medical Treatment History">
                        <field name="physical_illness"/>
                        <group col="4" colspan="2">
                            <field name="head_injury" widget="radio"/>
                            <field name="specify_injury" invisible="head_injury != 'Present'"/>
                        </group>
                        <group col="4" colspan="2">
                            <field name="past_surgeris" widget="radio"/>
                            <field name="specify_surgeries" invisible="past_surgeris != 'Present'"/>
                        </group>
                        <group col="4" colspan="2">
                            <field name="seizure" widget="radio"/>
                            <field name="specify_seizure" invisible="seizure != 'Present'"/>
                        </group>
                        <group col="4" colspan="2">
                            <field name="substance_use" widget="radio"/>
                            <field name="specify_substance" invisible="substance_use != 'Present'"/>
                        </group>
                        <field name="allergies"/>
                        <group col="4" colspan="2">
                            <field name="epilepsy" widget="radio"/>
                            <field name="specify_episodes" invisible="epilepsy != 'Present'"/>
                        </group>
                    </group>

                    <!-- Continue with medical symptoms and checks -->
                    <group string="Check if the client has or had any of these issues:"/>
                    <group>
                        <group col="4" colspan="3" string="Constitutional">
                            <field name="weight_loss" widget="radio"/>
                            <field name="fatigue" widget="radio"/>
                            <field name="fever" widget="radio"/>
                        </group>
                        <group col="4" colspan="3" string="Respiratory">
                            <field name="cough_easy" widget="radio"/>
                            <field name="cough_blood" widget="radio"/>
                            <field name="wheezing" widget="radio"/>
                            <field name="chills" widget="radio"/>
                        </group>

                        <!-- Continue with all other symptom groups -->

                        <group col="4" colspan="3" string="Females Only">
                            <field name="last_date_mammogram"/>
                            <field name="mammogram_options" widget="radio"/>
                            <field name="date_last_pap"/>
                            <field name="pap_options" widget="radio"/>
                            <field name="age_onset_periods"/>
                            <field name="age_onset_menopause"/>
                            <field name="regular_periods" widget="radio"/>
                            <field name="no_pregnancies"/>
                        </group>
                    </group>

                    <!-- Medication sections -->
                    <group string="Psychiatric Medication">
                        <field name="physiatric_medication_ids" nolabel="1">
                            <tree editable="bottom">
                                <field name="name"/>
                                <field name="dosage"/>
                                <field name="frequency"/>
                                <field name="administration"/>
                                <field name="prescriber_name"/>
                            </tree>
                        </field>
                    </group>

                    <group string="General Medication">
                        <field name="general_medication_ids" nolabel="1">
                            <tree editable="bottom">
                                <field name="name"/>
                                <field name="dosage"/>
                                <field name="frequency"/>
                                <field name="administration"/>
                                <field name="prescriber_name"/>
                            </tree>
                        </field>
                    </group>

                    <group string="Psychiatric Medication Effects">
                        <field name="physiatric_effect_ids" nolabel="1">
                            <tree editable="bottom">
                                <field name="name"/>
                                <field name="side_effects"/>
                                <field name="actions_taken"/>
                            </tree>
                        </field>
                    </group>

                    <group string="General Medication Effects">
                        <field name="general_effect_ids" nolabel="1">
                            <tree editable="bottom">
                                <field name="name"/>
                                <field name="side_effects"/>
                                <field name="actions_taken"/>
                            </tree>
                        </field>
                    </group>

                    <!-- Continue with family history, personal history, etc. -->

                    <!-- Mental Status Examination -->
                    <group string="Mental Status Examination"/>
                    <group string="1.General Appearance and Behaviour:">
                        <field name="general_appearance" nolabel="1" widget="radio"/>
                    </group>

                    <group col="4" colspan="2">
                        <field name="dress" widget="radio"/>
                        <field name="eye_contact" widget="radio"/>
                        <field name="touch_with_surrounding" widget="radio"/>
                        <field name="rapport" widget="radio"/>
                        <field name="attitude_to_interviewer" widget="radio"/>
                    </group>

                    <!-- Continue with all mental status examination fields -->

                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                    <field name="activity_ids" widget="mail_activity"/>
                </div>
            </form>
        </field>
    </record>


    <!-- Case History Tree View -->
    <record id="view_hospital_case_history_tree" model="ir.ui.view">
        <field name="name">hospital.case.history.tree</field>
        <field name="model">hospital.case.history</field>
        <field name="arch" type="xml">
            <tree>
                <field name="patient_id"/>
                <field name="dob"/>
                <field name="age"/>
                <field name="sex"/>
                <field name="marital_status"/>
                <field name="occupation"/>
                <field name="create_date" string="Creation Date"/>
            </tree>
        </field>
    </record>

    <!-- Chief Complaint Form View -->
    <record id="view_hospital_chief_complaint_form" model="ir.ui.view">
        <field name="name">hospital.chief.complaint.form</field>
        <field name="model">hospital.chief.complaint</field>
        <field name="arch" type="xml">
            <form>
                <group>
                    <field name="name"/>
                    <field name="duration"/>
                    <field name="year"/>
                    <field name="case_history_id"/>
                </group>
            </form>
        </field>
    </record>

    <!-- Case History Action -->
    <record id="action_hospital_case_history" model="ir.actions.act_window">
        <field name="name">Case History</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hospital.case.history</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first case history!
            </p>
        </field>
    </record>
</odoo>