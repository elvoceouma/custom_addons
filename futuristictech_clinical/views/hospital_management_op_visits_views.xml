<?xml version="1.0"?>
<odoo>
    <record id="view_op_visit_form" model="ir.ui.view">
        <field name="name">op.visit.form</field>
        <field name="model">op.visit</field>
        <field name="arch" type="xml">
            <form string="OP Visits">
                <header>
                    <field name="state" widget="statusbar" statusbar_visible="draft,confirmed,completed,canceled"/>
                    <button name="action_draft" type="object" string="Confirm" class="oe_highlight" invisible="state != 'draft'"/>
                    <button name="action_confirmed" type="object" string="Complete" class="oe_highlight" invisible="state != 'confirmed'"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="buttons">
                        <!-- <button type="action" class="oe_stat_button" name="931" context="{'search_default_patient': patient_id,'search_default_patient': patient_id,'default_prescription_type':'op','default_op_visit_id':active_id}" icon="fa-list">
                            <field string="Prescriptions" name="prescription_count" widget="statinfo"/>
                        </button>
                        <button type="action" class="oe_stat_button" name="188" context="{'search_default_op_visit': active_id,'default_op_visit': active_id}" icon="fa-pencil-square-o">
                            <field string="OP Bills" name="invoice_count" widget="statinfo"/>
                        </button> -->
                    </div>
                    <div class="oe_title">
                        <h1>
                            <field name="name" readonly="1"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="patient_id" readonly="state != 'draft'"/>
                            <field name="partner_id" readonly="state != 'draft'"/>
                        </group>
                        <group>
                            <field name="visit_date" readonly="state != 'draft'"/>
                            <field name="treating_doctor" readonly="state != 'draft'"/>
                            <field name="tot_amount" invisible="1"/>
                        </group>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>
</odoo>